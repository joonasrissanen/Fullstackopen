{"version":3,"sources":["persons.js","App.js","index.js"],"names":["baseUrl","getAll","axios","get","Notification","message","isError","style","background","fontSize","borderStyle","borderRadius","padding","marginBottom","color","PersonForm","name","number","handleNameChange","handleNumberChange","submitNewPerson","value","onChange","type","onClick","Persons","persons","deletePerson","map","person","key","Filter","filterValue","handleFilterChange","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filterInput","setFilterInput","shownPersons","setShownPersons","setMessage","setError","useEffect","then","res","data","filteredPersons","forEach","toLowerCase","substring","length","push","event","preventDefault","target","includes","window","confirm","oldPerson","find","p","id","personObject","put","catch","error","post","addPerson","delete","newPersons","filter","elem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a31ad37e.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nexport const getAll = () => {\n  return axios.get(baseUrl);\n};\n\nexport const addPerson = personObject => {\n  return axios.post(baseUrl, personObject);\n};\n\nexport const deletePerson = id => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nexport const updatePerson = (id, personObject) => {\n  return axios.put(`${baseUrl}/${id}`, personObject);\n}\n","import React, { useState, useEffect } from 'react'\nimport { getAll, addPerson, deletePerson, updatePerson } from './persons';\n\nconst Notification = ({ message, isError }) => {\n  const style = {\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  };\n\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div style={{...style, color: isError ? 'red' : 'green'}}>\n      {message}\n    </div>\n  )\n};\n\nconst PersonForm = ({ name, number, handleNameChange, handleNumberChange, submitNewPerson}) => {\n  return (\n    <form>\n      <div>\n        name: <input value={name} onChange={handleNameChange} />\n      </div>\n      <div>number: <input value={number} onChange={handleNumberChange} /></div>\n      <div>\n        <button type=\"submit\" onClick={submitNewPerson}>add</button>\n      </div>\n    </form>\n  );\n};\n\nconst Persons = ({ persons, deletePerson }) => {\n  return (\n    persons.map(person => {\n      return (\n        <div key={person.name}>\n          {person.name} {person.number}\n          <button onClick={() => deletePerson(person)}>delete</button>\n        </div>\n      )\n    })\n  );\n};\n\nconst Filter = ({ filterValue, handleFilterChange }) => {\n  return (\n    <form>\n      <div>filter shown with <input value={filterValue} onChange={handleFilterChange} /></div>\n    </form>\n  );\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber] = useState('');\n  const [filterInput, setFilterInput] = useState('');\n  const [shownPersons, setShownPersons] = useState(persons);\n  const [message, setMessage] = useState(null);\n  const [isError, setError] = useState(false);\n\n  useEffect(() => {\n    getAll().then(res => setPersons(res.data));\n  }, []);\n\n  useEffect(() => {\n    const filteredPersons = [];\n    persons.forEach(person => {\n      if (person && person.name) {\n        const name = person.name.toLowerCase();\n        if (name.substring(0, filterInput.length) === filterInput.toLowerCase() || filterInput === '') {\n          filteredPersons.push(person);\n        }\n      }\n    })\n    setShownPersons(filteredPersons);\n  }, [filterInput, persons]);\n\n  const handleFilterChange = (event) => {\n    event.preventDefault();\n    setFilterInput(event.target.value)\n  };\n\n  const handleNameChange = (event) => {\n    event.preventDefault();\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    event.preventDefault();\n    setNewNumber(event.target.value);\n  };\n\n  const submitNewPerson = (event) => {\n    event.preventDefault();\n    if (persons.map(person => person.name.toLowerCase()).includes(newName.toLowerCase())) {\n      if(window.confirm(`${newName} is already added to phonebook. Replace the old number with a new one?`)) {\n        const oldPerson = persons.find(p => p.name.toLowerCase() === newName.toLowerCase());\n        updatePerson(oldPerson.id, { ...oldPerson, number: newNumber})\n        .then(res => {\n          setPersons(persons.map(p => p.id === oldPerson.id ? res.data : p));\n          setMessage(`Updated ${newName}`);\n          setError(false);\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch(error => {\n          setMessage(error);\n          setError(true);\n        });\n      }\n    } else if (newName !== '' && newNumber !== '') {\n      const personObj = {\n        name: newName,\n        number: newNumber,\n      }\n      addPerson(personObj).then(() => {\n        getAll().then(res => setPersons(res.data));\n        setMessage(`Added ${newName}`);\n        setError(false);\n        setNewName('');\n        setNewNumber('');\n      })\n    }\n  };\n\n  const removePerson = (person) => {\n    if (window.confirm(`Delete ${person.name}`)) {\n      deletePerson(person.id).then(() => {\n        const newPersons = persons.filter(elem => elem.id !== person.id);\n        setMessage(`Deleted ${person.name}`);\n        setPersons(newPersons);\n      }).catch(() => {\n        setMessage(`Information of ${person.name} has already been removed from the server.`);\n        setError(true);\n      });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} isError={isError} />\n      <Filter filterValue={filterInput} handleFilterChange={handleFilterChange} />\n      <h2>Add a new</h2>\n      <PersonForm\n        name={newName}\n        number={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        submitNewPerson={submitNewPerson}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={shownPersons} deletePerson={removePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}